#	Example:
# 
#	example_trigger = {
#		tag = GER
#		is_ai = no
#	}
#
#
#	In a script file:
#
#	trigger = {
#		exampel_trigger = yes
#	}
# 
#	THIS FILE IS FOR TRIGGERS SPECIFICALLY FOR THE GER TAG

GER_has_mefo_bills = {
	custom_trigger_tooltip = {
		tooltip = GER_MEFO_IS_ACTIVE_OR_NOT
		hidden_trigger = {
			check_variable = {
				var = GER_FR_consumer_goods_factor 
				value = 0.01
				compare = equals
			}
		}
	}
}

is_friend_or_potential_friend_of_GER = {
	OR = {
		is_puppet_of = GER
		is_puppet = no
	}
	OR = {
		is_in_faction_with = GER
		is_in_faction = no
	}
	NOT = { has_war_with = GER }
	has_capitulated = no
	exists = yes
}

is_alone_or_in_faction_at_peace_with_GER = {
	OR = {
		is_in_faction = no
		is_in_faction_with = GER
		AND = {
			is_in_faction = yes
			NOT = {
				is_in_faction_with = GER
			}
		}
	}
	NOT = {
		any_allied_country = {
			has_war_with = GER
		}
	}
}

GER_naval_interest_trigger = {
	OR = {
		AND = {
			not = { has_war_with = SOV }
			OR = {
				has_war_with = ENG
				has_war_with = USA
				has_war_with = JAP
			}
		}
		has_completed_focus = GER_plan_z_a
		has_completed_focus = GER_rebuild_the_high_seas_fleet_a
	}
}

GER_should_split_SOV_front_with_ITA = {
	set_temp_variable = { num_ger_units = GER.num_armies }
	set_temp_variable = { num_ita_units = ITA.num_armies }
	
	check_variable = { num_ger_units > 100 }
	check_variable = { num_ita_units > 90 }
	
	ITA = {
		is_ai = yes
	}
	
	ITA = {
		OR = {
			exists = no
			NOT = { is_in_faction_with = GER }
			surrender_progress < 0.1
		}
	}
	
	ROM = {
		OR = {
			exists = no
			NOT = { is_in_faction_with = GER }
			surrender_progress < 0.05
		}
	}
	
	HUN = {
		OR = {
			exists = no
			NOT = { is_in_faction_with = GER }
			surrender_progress < 0.25
		}
	}
}

# a more relaxed version of previous one
GER_should_continue_split_SOV_front_with_ITA = {

	set_temp_variable = { num_ger_units = GER.num_armies }
	set_temp_variable = { num_ita_units = ITA.num_armies }
	
	check_variable = { num_ger_units > 85 }
	check_variable = { num_ita_units > 75 }
	
	ITA = {
		is_ai = yes
	}
	
	ITA = {
		OR = {
			exists = no
			NOT = { is_in_faction_with = GER }
			surrender_progress < 0.15
		}
	}
	
	ROM = {
		OR = {
			exists = no
			NOT = { is_in_faction_with = GER }
			surrender_progress < 0.1
		}
	}
	
	HUN = {
		OR = {
			exists = no
			NOT = { is_in_faction_with = GER }
			surrender_progress < 0.30
		}
	}
}

going_war_with_SOV = {
	or = {
		has_war_with = SOV
		focus_progress = {
			focus = GER_ussr_war_goal
			progress > 0.01
		}
		is_justifying_wargoal_against = SOV
		has_wargoal_against = SOV
	}
}

is_controlled_by_ITA_or_subject = {
	CONTROLLER = {
		OR = {
			tag = ITA
			is_subject_of = ITA
		}
	}
}

is_controlled_by_GER_or_subject = {
	CONTROLLER = {
		OR = {
			tag = GER
			is_subject_of = GER
		}
	}
}

is_controlled_by_ROOT_or_ally_with_fin = {
	custom_trigger_tooltip = {
		tooltip = is_controlled_by_ROOT_or_ally
		CONTROLLER = {
			OR = {
				tag = ROOT
				is_subject_of = ROOT
				is_in_faction_with = ROOT
				AND = {
					tag = FIN
					GER = {
						has_country_flag = FIN_pact_for_continuation_war_flag
					}
					FIN = {
						NOT = { has_war_with = GER }
						has_country_flag = FIN_pact_for_continuation_war_flag
					}
				}
			}
		}
	}
}

is_controlled_by_target_or_subject = {
	CONTROLLER = {
		OR = {
			tag = PREV
			is_subject_of = PREV
		}
	}
}

japan_declared_war_usa = {
	JAP = {
		NOT = { has_war_with = GER }
		has_war_with = USA
	}
	has_global_flag = GER_ITA_JAP_TRIPLE
}

krupp_used_des = {
	AND = {
		OR = {
			has_idea = krupp_starter_ver
			has_idea = krupp_nofocusver
			has_idea = krupp_idea_focus
		}
	}
}

krupp_used = {
	AND = {
		OR = {
			has_idea = krupp_nofocusver
			has_idea = krupp_idea_focus
		}
	}
}

GER_four_year_plan_available = {
	custom_trigger_tooltip = {
		tooltip = GER_four_year_plan_active
		has_global_flag = GER_FOUR_PLAN_FLAG
	}
}

is_literally_japan = {
	OR = {
		original_tag = JAP
		original_tag = MAN
		original_tag = MEN
	}
}

any_state_is_norwegen = {
	OR = {
		NOT = { event_target:NOR_GER_PUPPET_MOD_side = { is_puppet_of = GER } }
		NOT = { NOR = { is_puppet_of = GER } }
	}
	any_controlled_state = {
		OR = {
			is_core_of = NOR
			is_owned_by = NOR
		}
		NOT = { is_core_of = GER }
	}
}

any_state_is_niederlande = {
	OR = {
		NOT = { event_target:HOL_GER_PUPPET_MOD_side = { is_puppet_of = GER } }
		NOT = { HOL = { is_puppet_of = GER } }
	} 
	any_controlled_state = {
		OR = {
			is_core_of = HOL
			is_owned_by = HOL
		}
		NOT = { is_core_of = GER }
	}
}

any_state_is_belgien_nordfrankreich_states = {
	OR = {
		NOT = { event_target:BEL_GER_PUPPET_MOD_side = { is_puppet_of = GER } }
		NOT = { BEL = { is_puppet_of = GER } }
	}
	any_controlled_state = {
		OR = {
			is_core_of = BEL
			is_owned_by = BEL
		}
		NOT = { is_core_of = GER }
	}
}

any_state_is_poland = {
	NOT = { RGV = { is_puppet_of = GER } }
	any_controlled_state = {
		OR = {
			is_core_of = POL
			is_owned_by = POL
		}
		NOT = { is_core_of = GER }
	}
}

any_state_is_ostland = {
	NOT = { BLR = { is_puppet_of = GER } }
	OR = {
		any_controlled_state = {
			has_state_flag = SS_Country_Core_State
		}
	}
}

any_state_is_UKR = {
	NOT = { UKR = { is_puppet_of = GER } }
	any_controlled_state = {
		is_core_of = UKR
		NOT = { is_core_of = GER }
	}
}

any_state_is_moscow = {
	NOT = { RMK = { is_puppet_of = GER } }
	any_controlled_state = {
		is_core_of = RMK
		NOT = { is_core_of = GER }
		NOT = { has_state_flag = GER_MOSKOW_IGNORE_STATES }
	}
}

any_state_is_caucasus = {
	NOT = { RKS = { is_puppet_of = GER } }
	any_controlled_state = {
		is_core_of = RKS
		NOT = { is_core_of = GER }
	}
}

any_state_is_turkestan = {
	NOT = { RTK = { is_puppet_of = GER } }
	any_controlled_state = {
		is_core_of = RTK
		NOT = { is_core_of = GER }
	}
}

can_expanded_norwegen = {
	NOR = { is_puppet_of = GER }
	any_controlled_state = {
		OR = {
			is_core_of = NOR
			is_owned_by = NOR
		}
		NOT = { is_core_of = GER }
	}
}

can_expanded_niederlande = {
	HOL = { is_puppet_of = GER }
	any_controlled_state = {
		OR = {
			is_core_of = HOL
			is_owned_by = HOL
		}
		NOT = { is_core_of = GER }
	}
}

can_expanded_belgien_nordfrankreich_states = {
	BEL = { is_puppet_of = GER }
	any_controlled_state = {
		OR = {
			is_core_of = BEL
			is_owned_by = BEL
		}
		NOT = { is_core_of = GER }
	}
}

can_expanded_poland = {
	RGV = { is_puppet_of = GER }
	any_controlled_state = {
		OR = {
			is_core_of = POL
			is_owned_by = POL
		}
		NOT = { is_core_of = GER }
	}
}

can_expanded_ostland = {
	BLR = { is_puppet_of = GER }
	OR = {
		any_controlled_state = {
			has_state_flag = SS_Country_Core_State
		}
	}
}

can_expanded_UKR = {
	UKR = { is_puppet_of = GER }
	any_controlled_state = {
		is_core_of = UKR
		NOT = { is_core_of = GER }
	}
}

can_expanded_moscow = {
	RMK = { is_puppet_of = GER }
	any_controlled_state = {
		is_core_of = RMK
		NOT = { is_core_of = GER }
	}
}

can_expanded_caucasus = {
	RKS = { is_puppet_of = GER }
	any_controlled_state = {
		is_core_of = RKS
		NOT = { is_core_of = GER }
	}
}

can_expanded_turkestan = {
	RTK = { is_puppet_of = GER }
	any_controlled_state = {
		is_core_of = RTK
		NOT = { is_core_of = GER }
	}
}

