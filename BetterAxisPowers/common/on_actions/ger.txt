on_actions = {

    on_state_control_changed = {
		effect = {
			if = { 
				limit = {
					FROM = {
						original_tag = GER
						has_war = yes
						has_power_balance = { id = GER_power_balance }
						is_power_balance_side_active = {
							id = GER_power_balance
							side = default_left_side
						}
					}
					FROM.FROM = {
						is_owned_by = GER
					}
				}
				if = { 
					limit = {
						FROM.FROM = {
							is_core_of = GER
						}
					}
					if = {
						limit = {
							FROM = { check_variable = { GER_lost_core = 0 } }
						}
						FROM = {
							set_variable = { GER_lost_core = FROM.FROM }
							country_event = { id = ger_lost_core.1 hours = 1 }
						}
					}
					else = { 
						GER_bop_medium_decrease_effect = yes
						GER_bop_increase_lost_core_modifier = yes
					}
					
				}
			}
			else_if = { 
				limit = {
					ROOT = {
						original_tag = GER
						has_war = yes
						has_power_balance = { id = GER_power_balance }
						is_power_balance_side_active = {
							id = GER_power_balance
							side = default_right_side
						}
					}
					FROM.FROM = {
						is_owned_by = GER
					}
				}
				if = {
					limit = {
						FROM.FROM = {
							is_core_of = GER
						}
					}
					if = { 
						limit = {
							check_variable = { GER_reclaimed_core = 0 }
						}
						
						set_variable = { GER_reclaimed_core = FROM.FROM }
						country_event = { id = ger_lost_core.2 hours = 1 }
					}
					else = {
						GER_bop_medium_increase_effect = yes
						GER_bop_decrease_lost_core_modifier = yes
					}
				}
				else = {
					GER_bop_very_low_increase_effect = yes
				}
			}
		}
    }

	on_capitulation = {
		effect = {
			if = {
				limit = {
					tag = HOL
					NOT = { has_global_flag = GER_CAP_HOL_KAISER }
					GER = {
						has_global_flag = GER_BLOCKED_KAISER
						has_war_with = HOL
					}
				}
				GER = {
					country_event = ger_kaiser_in_exile.6 
					set_global_flag = GER_CAP_HOL_KAISER
				}
			}
		}
	}

	on_puppet = {
		effect = {
			if = {
				limit = {
					tag = HOL
					NOT = { has_global_flag = GER_CAP_HOL_KAISER }
					GER = {
						has_global_flag = GER_BLOCKED_KAISER
						has_war_with = HOL
					}
				}
				GER = {
					country_event = ger_kaiser_in_exile.6 
					set_global_flag = GER_CAP_HOL_KAISER
				}
			}
		}
	}

	on_annex = {
		effect = {
			if = {
				limit = {
					tag = HOL
					NOT = { has_global_flag = GER_CAP_HOL_KAISER }
					GER = {
						has_global_flag = GER_BLOCKED_KAISER
						has_war_with = HOL
					}
				}
				GER = {
					country_event = ger_kaiser_in_exile.6 
					set_global_flag = GER_CAP_HOL_KAISER
				}
			}
		}
	}
	
	on_declare_war = {
		effect = {
			if = {
				limit = { has_country_flag = WTT_support_from_soviet }
				PRC_soviet_tribute_clear_all = yes
				clr_country_flag = WTT_support_from_soviet
			}
			FROM = {
				if = {
					limit = { has_country_flag = WTT_support_from_soviet }
					PRC_soviet_tribute_clear_all = yes
					clr_country_flag = WTT_support_from_soviet
				}
			}
			if = {
				limit = {
					OR = {
						AND = {
							tag = GER
							FROM = { tag = SOV }
						}
						AND = {
							tag = SOV
							FROM = { tag = GER }
						}
					}
					GER = { has_completed_focus = GER_ussr_war_goalV }
				}
				hidden_effect = {
					GER = { 
						add_timed_idea = { idea = GER_barbarossa days = 180 }
						activate_mission = GER_barbarossa_mission
					}
				}
			}
		}
	}

	on_declare_war = {
		effect = {
			if = {
				limit = {
					tag = GER
					has_global_flag = GER_nohelp_denmark
					FROM = { tag = DEN }
				}
				DEN = {
					add_timed_idea = {
						idea = nohelp_denmark
						days = 7
					}
				}
			}
		}
	}

}
