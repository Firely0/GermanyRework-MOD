add_namespace = gerb
add_namespace = ger_lost_core
add_namespace = ger_request_qingdao
add_namespace = ger_around_maginot_event
add_namespace = ger_kaiser_in_exile
add_namespace = ger_fuhrer_end

country_event = {
	id = ger_request_qingdao.1
	title = "Demand Qingdao"
	desc = ""
	picture = GFX_report_event_generic_read_write

  is_triggered_only = yes
  
	option = { 
		name = "Demand it"
    random_country = {
      limit = {
        owns_state = 743
      }
      country_event = { id = ger_request_qingdao.2 days = 1 }
    }
	}
}

country_event = {
	id = ger_request_qingdao.2
	title = "Germany Demands Qingdao"
	desc = ""
	picture = GFX_report_event_generic_read_write

  set_from = ROOT

  is_triggered_only = yes

	option = { 
		name = "Fine"
    ai_chance = { base = 40 
    modifier = { tag = JAP GER = { has_completed_focus = GER_japan_friend_v } factor = 80 }
    modifier = { tag = CHI GER = { has_completed_focus = GER_china_friend_v } factor = 80 }
    modifier = { tag = MAN GER = { has_completed_focus = GER_japan_friend_v } factor = 100 }
    modifier = { is_major = yes add = 1 }
    }
    GER = {
      country_event = { id = ger_request_qingdao.4 days = 1 }
    }
	}

  option = { 
		name = "No"
    ai_chance = { base = 40 
    modifier = { tag = JAP GER = { has_completed_focus = GER_china_friend_v } factor = 20 }
    modifier = { tag = CHI GER = { has_completed_focus = GER_japan_friend_v } factor = 30 }
    modifier = { tag = MAN GER = { has_completed_focus = GER_china_friend_v } factor = 0 }}
    GER = {
      country_event = { id = ger_request_qingdao.3 days = 1 }
    }
	}
}

country_event = {
	id = ger_request_qingdao.3
	title = "They Forced Our Hand"
	desc = ""
	picture = GFX_report_event_generic_read_write

  is_triggered_only = yes

	option = { 
		name = "Prepare for War"
    create_wargoal = {
      type = take_state_focus
      target = from
      generator = { 743 }
    }
    add_state_claim = 743
	}
}

country_event = {
	id = ger_request_qingdao.4
	title = "They Acepted Our Request"
	desc = ""
	picture = GFX_report_event_generic_read_write

  is_triggered_only = yes

	option = { 
		name = "Good"
    transfer_state = 743 target = GER
    add_state_core = 743
	}
}

country_event = {
	id = ger_lost_core.1
	title = "Fuhrer Worried About Lost Lands "
	desc = ""
	picture = GFX_report_event_generic_soldiers_surrendering

  is_triggered_only = yes

	option = { 
		name = "We Will Together Again Soon..."

		GER_bop_medium_decrease_effect = yes
		custom_effect_tooltip = ITA_losing_cores_tt

	}
}  

country_event = {
	id = ger_lost_core.2
	title = "We Have Recaptured Germany"
	desc = ""
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes

	fire_only_once = yes

	# ok
	option = { 
		name = BBA_italy_bop.3.a

		GER_bop_medium_increase_effect = yes	
		custom_effect_tooltip = ITA_reclaiming_cores_tt	
	}
}

#Yugoslavia Germany Events
country_event = {
    id = gerb.1
    title = "Demands For Yugoslavia!"
    desc = ""
    picture = GFX_report_event_chinese_army_training

    is_triggered_only = yes

 option = {
    name = "Demand Slovenia"
    ai_chance = { factor = 20 }
	random_country = {
		limit = {
			owns_state = 102 
		}
		country_event = { id = gerb.2 days = 1 }
	}
 }

  option = {
    name = "Slovenia for Membership"
    ai_chance = { factor = 80 }

	random_country = {
		limit = {
			owns_state = 102
		}
		country_event = { id = gerb.21 days = 1 }
	}
  }
}

country_event = {
    id = gerb.2
    title = "Germany Demands Slovenia!"
    desc = ""
    picture = GFX_report_event_chinese_army_training

    is_triggered_only = yes

 option = {
    name = "Accept"
    ai_chance = { base = 40 
    modifier = { tag = ROOT ROOT = { has_idea = fascist_influence } factor = 60 }
    }
    GER = { country_event = { id = gerb.3 days = 1 } }   
 }

  option = {
    name = "No"
    ai_chance = { base = 60
    }
    GER = { country_event = { id = gerb.4 days = 1 } }   
 }
}

country_event = {
  id = gerb.21
  title = "Germany Demands Slovenia!"
  desc = ""
  picture = GFX_report_event_chinese_army_training

  is_triggered_only = yes

option = {
  name = "Accept"
  ai_chance = { factor = 80 }
  GER = { country_event = { id = gerb.31 days = 1 } }   
}

option = {
  name = "No"
  ai_chance = { factor = 20 }
  GER = { country_event = { id = gerb.4 days = 1 } }   
}
}

country_event = {
    id = gerb.3
    title = "Yugoslavia Accepted Our Request"
    desc = ""
    picture = GFX_report_event_chinese_army_training

    is_triggered_only = yes

  option = {
    name = "Good"
    ai_chance = { factor = 100 }
    GER = { transfer_state = 102 add_state_core = 102 }
  }
}

country_event = {
  id = gerb.31
  title = "Yugoslavia Accepted Our Request"
  desc = ""
  picture = GFX_report_event_chinese_army_training

  is_triggered_only = yes

option = {
  name = "Good"
  ai_chance = { factor = 100 }

  GER = { transfer_state = 102 add_state_core = 102 }
  add_to_faction = YUG

}
}

country_event = {
    id = gerb.4
    title = "Yugoslavia Not Accepted Our Request"
    desc = ""
    picture = GFX_report_event_chinese_army_training

    is_triggered_only = yes

  option = {
    name = "They Forced Our Hand"
    ai_chance = { factor = 100 }
    create_wargoal = {
        type = take_state_focus
        generator = { 102 }
    }
  }
}

country_event = {
    id = gerb.5
    title = "Demands For Czechoslovakia!"
    desc = ""
    picture = GFX_report_event_chinese_army_training

    is_triggered_only = yes

 option = {
    name = "Demand Sudetenland"
    ai_chance = { factor = 20 }
	random_country = {
		limit = {
			owns_state = 69 
		}
		country_event = { id = gerb.6 days = 1 }
	}
 }

  option = {
    name = "Sudetenland for Membership"
    ai_chance = { factor = 80 }
	random_country = {
		limit = {
			owns_state = 102
		}
		country_event = { id = gerb.61 days = 1 }
    set_global_flag = ger_sud_membership
	}
  }
}

country_event = {
    id = gerb.6
    title = "Germany Demands Sudetenland!"
    desc = ""
    picture = GFX_report_event_chinese_army_training

    is_triggered_only = yes

 option = {
    name = "Accept"
    ai_chance = { base = 40 
    modifier = { tag = ROOT ROOT = { has_idea = fascist_influence } factor = 50 }
    }
    GER = { country_event = { id = gerb.7 days = 1 } }   
 }

  option = {
    name = "No"
    ai_chance = { factor = 60
    modifier = {
        factor = 40
        has_idea = fascist_influence
    }
    }
    GER = { country_event = { id = gerb.8 days = 1 } }   
 }
}

country_event = {
  id = gerb.61
  title = "Germany Demands Sudetenland!"
  desc = ""
  picture = GFX_report_event_chinese_army_training

  is_triggered_only = yes

option = {
  name = "Accept"
  ai_chance = { base = 60 
  modifier = { tag = ROOT ROOT = { has_idea = fascist_influence } factor = 80 }
  }
  GER = { country_event = { id = gerb.71 days = 1 } }
}

option = {
  name = "No"
  ai_chance = { factor = 40
  }
  GER = { country_event = { id = gerb.8 days = 1 } }   
}
}

country_event = {
    id = gerb.7
    title = "Czechoslovakia Accepted Our Request"
    desc = ""
    picture = GFX_report_event_chinese_army_training

    is_triggered_only = yes

   option = {
    name = "Good"
    ai_chance = { factor = 100 }

    GER = { transfer_state = 69 add_state_core = 69 }
  }
}

country_event = {
  id = gerb.71
  title = "Czechoslovakia Accepted Our Request"
  desc = ""
  picture = GFX_report_event_chinese_army_training

  is_triggered_only = yes

 option = {
  name = "Good"
  ai_chance = { factor = 100 }

  GER = { transfer_state = 69 add_state_core = 69 }
  add_to_faction = CZE
 }
}

country_event = {
    id = gerb.8
    title = "Czechoslovakia Not Accepted Our Request"
    desc = ""
    picture = GFX_report_event_chinese_army_training

    is_triggered_only = yes

  option = {
    name = "They Forced Our Hand"
    ai_chance = { factor = 100 }
    create_wargoal = {
        type = take_state_focus
        target = CZE
        generator = { 69 }
    }
  }
}

# Ultimatum from Germany (Turkey)
country_event = {
	id = gerb.79
	title = gerb.79.t
	desc = gerb.79.d
	picture = GFX_report_event_german_turkish_pact

	is_triggered_only = yes

	option = {
		name = gerb.79.a
		ai_chance = {
			factor = 70
			modifier = {
				NOT = { BUL = { is_in_faction_with = GER } }
				factor = 0.5
			}
		}
		GER = { puppet = TUR }
	}

	option = {
		name = gerb.79.b
		ai_chance = {
			factor = 10
			modifier = {
				GER = { surrender_progress > 0.25 }
				factor = 5 #seems safe
			}
			modifier = {
				has_government = democratic
				factor = 5
			}
		}
		trigger = {
			TUR = {
				is_puppet = no
			}
			NOT = {
				has_war_with = ENG
			}
			NOT = {
				any_other_country = {
					is_in_faction_with = ENG
					has_war_with = TUR
				}
			}
			ENG = {
				is_faction_leader = yes
			}
		}
		ENG = { add_to_faction = TUR }
		TUR = {
			add_ai_strategy = {
				type = alliance
				id = "ENG"
				value = 200
			}
		}
	}

	option = {
		name = gerb.79.c
		ai_chance = {
			factor = 20
			modifier = {
				NOT = {
					has_government = fascism
				}
				factor = 5
			}
			modifier = {

				AND = {
					ENG = {
						has_capitulated = no
						has_war_with = GER
					}
					SOV = {
						has_capitulated = no
						has_war_with = GER
					}
					USA = {
						has_capitulated = no
						has_war_with = GER
					}
				}

				factor = 5 #lol come at me bro
			}
		}
		GER = {
			create_wargoal = {
				target = TUR
				type = puppet_wargoal_focus
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.216 }
		}
	}
}

country_event = {
  id = ger_around_maginot_event.1
  title = "War With France"
  desc = "GER_Around_ds"

  picture = GFX_report_event_german_troops

  is_triggered_only = yes

  will_lead_to_war_with = BEL
  will_lead_to_war_with = HOL
  will_lead_to_war_with = LUX
  will_lead_to_war_with = FRA
  
    option = {
		name = ger_around_maginot_event.1.a
		ai_chance = {
			factor = 60
			modifier = {
				factor = 100
				has_completed_focus = GER_tank_warfare
			}
		}
		if = { 
			limit = {
				country_exists = BEL
				NOT = { BEL = { is_in_faction_with = GER } }
				NOT = { has_war_with = BEL }
			}
			create_wargoal = {
				type = take_state_focus
				target = BEL
				expire = 0
				generator = { 6 }
			}
		}
		if =  {
			limit = {
				country_exists = HOL
				NOT = { HOL = { is_in_faction_with = GER } }
				NOT = { has_war_with = HOL }
				NOT = { HOL = { has_completed_focus = HOL_cave_to_the_germans } }
			}
			create_wargoal = {
				type = take_state_focus
				target = HOL
				expire = 0
				generator = { 7 }
			}
		}
		if =  {
			limit = {
				country_exists = HOL
				NOT = { HOL = { is_in_faction_with = GER } }
				NOT = { has_war_with = HOL }
				HOL = { has_completed_focus = HOL_cave_to_the_germans } 
				NOT = { HOL = { has_completed_focus = HOL_the_netherlands_first } }
			}
			HOL = {
				country_event = { id = mtg_germany.1 hours = 6 }
			}
		}
		if = {
			limit = {
				country_exists = LUX
				NOT = { LUX = { is_in_faction_with = GER } }
				NOT = { has_war_with = LUX }
			}
			create_wargoal = {
				type = take_state_focus
				target = LUX
				expire = 0
				generator = { 8 }
			}			
		}
		set_country_flag = GER_BLITZ
		complete_national_focus = GER_around_maginot_v
		hidden_effect = {
			news_event = { hours = 6 id = news.234 }
		}
	}

    option = {
	name = ger_around_maginot_event.1.b

	ai_chance = {
		factor = 0
    modifier = {
        factor = 80
        has_completed_focus = GER_Battle_Plan
    }
    modifier = {
        factor = 100
        has_completed_focus = GER_better_supply
    }

	}

		if = { 
			limit = {
				country_exists = BEL
				NOT = { BEL = { is_in_faction_with = GER } }
				NOT = { has_war_with = BEL }
			}
			create_wargoal = {
				type = take_state_focus
				target = BEL
				expire = 0
				generator = { 6 }
			}
		}
		if = {
			limit = {
				country_exists = LUX
				NOT = { LUX = { is_in_faction_with = GER } }
				NOT = { has_war_with = LUX }
			}
			create_wargoal = {
				type = take_state_focus
				target = LUX
				expire = 0
				generator = { 8 }
			}			
		}
		set_country_flag = GER_OLD_PLAN
		complete_national_focus = GER_around_maginot_v
		hidden_effect = {
			news_event = { hours = 6 id = news.234 }
		}

	}
}

country_event = { 
	id = ger_kaiser_in_exile.1
	title = ger_kaiser_in_exile.1.t
	desc = ger_kaiser_in_exile.1.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	option = {
		name = ger_kaiser_in_exile.1.a
		ai_chance = {
			factor = 0
		}

		GER = {
			GER_bop_medium_increase_effect = yes
		}
	}

	#Historical
	option = {
		name = ger_kaiser_in_exile.1.b
		ai_chance = {
			factor = 100
		}

		GER = {
			GER_bop_low_increase_effect = yes
		}
	}

	option = {
		name = ger_kaiser_in_exile.1.c

		ai_chance = {
			factor = 0
		}

		HOL = {
			country_event = ger_kaiser_in_exile.3
		}
	}
}

country_event = {
	id = ger_kaiser_in_exile.3
	title = wtt_germany.3.t
	desc = wtt_germany.3.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	#accept
	option = {
		name = wtt_germany.3.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				strength_ratio = { tag = GER ratio > 1.5 }
			}
			modifier = {
				factor = 0.2
				strength_ratio = { tag = GER ratio > 3 }
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = GER ratio > 5 }
			}
		}
		GER = {
			add_opinion_modifier = {
				target = ROOT
				modifier = GER_netherlands_kaiser_accept_opinion
			}
			country_event = { id = ger_kaiser_in_exile.4 days = 1 }
		}
		FRA = { country_event = { id = wtt_germany.28 } }
	}

	#refuse
	option = {
		name = wtt_germany.3.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				strength_ratio = { tag = GER ratio < 1 }
			}
			modifier = {
				factor = 0.2
				strength_ratio = { tag = GER ratio < 0.5 }
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = GER ratio < 0.2 }
			}
		}
		set_country_flag = netherlands_refused_return_kaiser
		GER = {
			add_opinion_modifier = {
				target = ROOT
				modifier = GER_netherlands_kaiser_decline_opinion
			}
			country_event = { id = ger_kaiser_in_exile.5 days = 1 }
			hidden_effect = { news_event = { id = ger_f_news.1 hours = 30 } }
		}
	}
}

#Notification event for Germany that the Kaiser is returned
country_event = {
	id = ger_kaiser_in_exile.4
	title = wtt_germany.4.t
	desc = wtt_germany.4.d
	picture = GFX_report_event_royal_parade

	is_triggered_only = yes
	
	#accept
	option = {
		name =  ger_kaiser_in_exile.4.a
		
        add_ideas = Kaiser_Idea

		set_country_flag = GER_Kaiser_in_Country

		hidden_effect = {
			GER = {
				create_corps_commander = {
					name = "Paul von Lettow-Vorbeck"
					gfx = GFX_portrait_ger_von_lettow_vorbeck
					traits = { trickster war_hero media_personality jungle_rat}
					skill = 4
					id = 499
					attack_skill = 3
					defense_skill = 3
					planning_skill = 2
					logistics_skill = 5
				}
			}
		}

		hidden_effect = { 
			news_event = { id = ger_f_news.3 hours = 6 }
		}
	}
}

#Netherlands refuses to return the Kaiser!
country_event = {
	id = ger_kaiser_in_exile.5
	title = wtt_germany.5.t
	desc = wtt_germany.5.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes
	
	#War!
	option = {
		ai_chance = {
			factor = 50
		}
		name = wtt_germany.5.a

		set_global_flag = GER_BLOCKED_KAISER

		declare_war_on = { target = HOL type = puppet_wargoal_focus }
		FRA = { country_event = { id = wtt_germany.28 } }
	}

	#Back down.
	option = {
		ai_chance = {
			factor = 50
		}
		name = "We Will Deal With Them Later."

		set_global_flag = GER_BLOCKED_KAISER
	}
}

#Kaiser returned through war
country_event = {
	id = ger_kaiser_in_exile.6
	title = ger_kaiser_in_exile.6.t
	desc = ger_kaiser_in_exile.6.d
	picture = GFX_report_event_royal_parade

	is_triggered_only = yes

	option = {
		name = ger_kaiser_in_exile.6.a
		
        add_ideas = Kaiser_Idea

		clr_global_flag = GER_BLOCKED_KAISER
		set_country_flag = GER_Kaiser_in_Country

		hidden_effect = {
			GER = {
				create_corps_commander = {
					name = "Paul von Lettow-Vorbeck"
					gfx = GFX_portrait_ger_von_lettow_vorbeck
					traits = { trickster war_hero media_personality jungle_rat}
					skill = 4
					id = 499
					attack_skill = 3
					defense_skill = 3
					planning_skill = 2
					logistics_skill = 5
				}
			}
		}
	}
}

#Bad Ending for Fuhrer.
country_event = {
	id = ger_fuhrer_end.1
	title = ger_fuhrer_end.1.t
	desc = ger_fuhrer_end.1.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 100
		}
		name = "Long Live Kaiser!"

		custom_effect_tooltip = GER_Fuhrer_Deposed_tt

		hidden_effect = { 

		remove_ideas = Kaiser_idea
		add_ideas = Fuhrer_idea

		remove_power_balance = {
			id = GER_power_balance
		}	

		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
		}

		set_popularities = {
			democratic = 0
			neutrality = 45
			fascism = 55
			communism = 0
		}

		GER_wilhelm_ii = {
			add_country_leader_role = {
			country_leader = {
				expire = "1965.1.1"
				ideology = despotism
				traits = {
					anti_democrat
					imperial_connections
				}
			}
			promote_leader = yes
			}
		}
		
		set_cosmetic_tag = GER_neutrality
		set_country_flag = kaiser_wilhelm_ii

		}
	}

}

